<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MonkeArchives</title>

<!-- Favicon -->
<link rel="icon" type="image/png" sizes="24x24" href="monkey-icon.png">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Archivo+Black&display=swap" rel="stylesheet">
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<style>
  body {
    margin: 0;
    padding: 0;
    min-height: 100vh;
    background-image: url('background.jpg'); /* change to your image */
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    font-family: Arial, sans-serif;
    color: white;
  }
  .overlay { 
    background: rgba(0,0,0,0.75); 
    padding: 2rem; 
    border-radius: 10px; 
    max-width: 600px; 
    margin: 2rem auto; 
    box-shadow: 0 0 20px #00ffff;
  }
  h1 { font-family:'Archivo Black',sans-serif; font-size:3rem; text-align:center; margin:0; color:#00ffff; text-shadow: 0 0 8px #00ffff; }
  h2 { font-size:1.2rem; text-align:center; margin:0.5rem 0 1.5rem 0; color:#00ffff; text-shadow: 0 0 6px #00cccc; }
  h3 { font-family:'Archivo Black',sans-serif; font-size:2rem; text-align:center; margin:1rem 0; color:#00ffff; text-shadow:0 0 6px #00ffff; }
  button.tab { padding:0.5rem 1rem; margin:0.25rem; border:none; border-radius:5px; background-color:#00ffff; color:black; font-weight:bold; cursor:pointer; }
  button.tab:hover { background-color:#00cccc; }
  form { margin-bottom:1rem; text-align:center; }
  input { padding:0.5rem; margin:0.25rem; border:none; border-radius:5px; width:40%; }
  button.submit { padding:0.5rem 1rem; border:none; border-radius:5px; background-color:#00ffff; color:black; font-weight:bold; cursor:pointer; }
  button.submit:hover { background-color:#00cccc; }
  ul { list-style:none; padding:0; max-height:300px; overflow-y:auto; }
  li { margin:0.5rem 0; text-align:center; }
  li a { color:#00ffff; text-decoration:none; font-size:1.2rem; text-shadow: 0 0 6px #00ffff; }
  p.contact { text-align:center; margin-top:1rem; font-size:0.9rem; color:#00ffff; text-shadow: 0 0 4px #00cccc; }
  p.contact a { color:#00ffff; text-decoration:underline; }
  .hidden { display:none; }
</style>
</head>
<body>
<div class="overlay">
  <h1>MonkeArchives</h1>
  <h2>Reject New Versions. Return To Old Gorilla Tag.</h2>

  <!-- Tab buttons -->
  <div style="text-align:center; margin-bottom:1rem;">
    <button class="tab" onclick="showPage('versionsPage')">Versions</button>
    <button class="tab" onclick="showPage('storyPage')">Story</button>
  </div>

  <!-- Versions page -->
  <div id="versionsPage">
    <!-- Upload form -->
    <form id="linkForm">
      <input type="text" id="name" placeholder="Version Name" required>
      <input type="url" id="url" placeholder="Version Link" required>
      <button type="submit" class="submit">Add Version</button>
    </form>

    <!-- Versions heading ABOVE the archive list -->
    <h3>Versions</h3>
    <ul id="archiveList"></ul>

    <!-- Contact notice -->
    <p class="contact">
      Accidentally uploaded the wrong file? Contact us at 
      <a href="mailto:monkearchives1@gmail.com">monkearchives1@gmail.com</a>!
    </p>
  </div>

  <!-- Story page -->
  <div id="storyPage" class="hidden">
    <p style="text-align:center; font-size:1.1rem; line-height:1.6rem; color:#00ffff; text-shadow:0 0 4px #00cccc;">
      This page was founded in September 2025 to archive every Gorilla Tag version from 2020 to the last update of Gorilla Tag. Please support us by uploading any extracted version you have to the website! Thank you for downloading from here!
    </p>
  </div>
</div>

<script>
// Supabase setup
const SUPABASE_URL = "https://lwgzcwdntylqcwnmllsx.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx3Z3pjd2RudHlscWN3bm1sbHN4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0NjU1MTUsImV4cCI6MjA3MzA0MTUxNX0.2mdpZ3DB9AXOgZZXIOwM5rsRQji0WcOoBfsu-sSoyvs";
const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

// Load archive list
const form = document.getElementById('linkForm');
const archiveList = document.getElementById('archiveList');

async function loadLinks() {
  const { data, error } = await supabase
    .from('versions')
    .select('*')
    .order('id', { ascending: false });

  if (error) { console.error(error); return; }

  archiveList.innerHTML = "";
  data.forEach(row => {
    const li = document.createElement('li');
    li.innerHTML = `<a href="${row.url}" target="_blank">${row.name}</a>`;
    archiveList.appendChild(li);
  });
}

form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const name = document.getElementById('name').value;
  const url = document.getElementById('url').value;
  await supabase.from('versions').insert([{ name, url }]);
  form.reset();
  loadLinks();
});

// Initial load
loadLinks();

// Tab switch function
function showPage(pageId) {
  document.getElementById('versionsPage').classList.add('hidden');
  document.getElementById('storyPage').classList.add('hidden');
  document.getElementById(pageId).classList.remove('hidden');
}
</script>
</body>
</html>
